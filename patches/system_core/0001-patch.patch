From 2d181deef83c127eb7a57d0adc6bb46a70f4a408 Mon Sep 17 00:00:00 2001
From: olegsvs <oleg.texet@gmail.com>
Date: Thu, 21 Jul 2016 05:07:23 -0400
Subject: [PATCH] patch

---
 healthd/BatteryMonitor.cpp | 4 ++--
 libutils/Android.mk        | 4 ++++
 libutils/MediatekHacks.cpp | 3 +++
 3 files changed, 9 insertions(+), 2 deletions(-)
 create mode 100644 libutils/MediatekHacks.cpp

diff --git a/healthd/BatteryMonitor.cpp b/healthd/BatteryMonitor.cpp
index a59c779..110e942 100644
--- a/healthd/BatteryMonitor.cpp
+++ b/healthd/BatteryMonitor.cpp
@@ -206,8 +206,8 @@ bool BatteryMonitor::update(void) {
     props.batteryLevel = mBatteryFixedCapacity ?
         mBatteryFixedCapacity :
         getIntField(mHealthdConfig->batteryCapacityPath);
-    props.batteryVoltage = getIntField(mHealthdConfig->batteryVoltagePath) / 1000;
-
+    //props.batteryVoltage = getIntField(mHealthdConfig->batteryVoltagePath) / 1000;
+	props.batteryVoltage = getIntField(mHealthdConfig->batteryVoltagePath); // mt6735
     props.batteryTemperature = mBatteryFixedTemperature ?
         mBatteryFixedTemperature :
         getIntField(mHealthdConfig->batteryTemperaturePath);
diff --git a/libutils/Android.mk b/libutils/Android.mk
index 23a5c59..0a31370 100644
--- a/libutils/Android.mk
+++ b/libutils/Android.mk
@@ -83,6 +83,10 @@ LOCAL_CFLAGS += -DALIGN_DOUBLE
 endif
 LOCAL_CFLAGS += -Werror
 
+ifeq ($(BOARD_HAS_MTK_HARDWARE), true)
+LOCAL_SRC_FILES += MediatekHacks.cpp
+endif
+
 LOCAL_STATIC_LIBRARIES := \
 	libcutils \
 	libc
diff --git a/libutils/MediatekHacks.cpp b/libutils/MediatekHacks.cpp
new file mode 100644
index 0000000..33a10ec
--- /dev/null
+++ b/libutils/MediatekHacks.cpp
@@ -0,0 +1,3 @@
+extern "C" {
+ void _ZN7android11IDumpTunnel11asInterfaceERKNS_2spINS_7IBinderEEE(){}
+}
-- 
1.9.1

